<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>WeatherWise ‚Äì Smart Weather Tips</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<style>
  :root {
  --primary: #0a84ff;
  --primary-light: #5ac8fa;
  --primary-dark: #0071e3;
  --accent: #30d158;
  --accent-light: #5ae27c;
  --background: #f5f5f7;
  --card-bg: rgba(245, 245, 247, 0.8);
  --text-dark: #1c1c1e;
  --text-medium: #636366;
  --text-light: #8e8e93;
  --border-radius: 18px;
  --shadow-sm: 0 1px 1px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 8px rgba(0,0,0,0.08);
  --shadow-lg: 0 12px 24px rgba(0,0,0,0.1);
  --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  --blur: 20px;
  --border: 1px solid rgba(255, 255, 255, 0.3);
  --highlight: rgba(255, 255, 255, 0.4);
}

/* Dark mode variables */
.dark-mode {
  --primary: #5ac8fa;
  --primary-light: #7ad4ff;
  --primary-dark: #0a84ff;
  --accent: #5ae27c;
  --accent-light: #7ee795;
  --background: #1c1c1e;
  --card-bg: rgba(28, 28, 30, 0.8);
  --text-dark: #f5f5f7;
  --text-medium: #aeaeb2;
  --text-light: #636366;
  --shadow-sm: 0 1px 1px rgba(0,0,0,0.2);
  --shadow-md: 0 4px 8px rgba(0,0,0,0.24);
  --shadow-lg: 0 12px 24px rgba(0,0,0,0.28);
  --border: 1px solid rgba(255, 255, 255, 0.08);
  --highlight: rgba(255, 255, 255, 0.1);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', sans-serif;
  background: var(--background);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 20px;
  color: var(--text-dark);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  transition: background 0.5s ease;
}

.container {
  background: var(--card-bg);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  padding: 28px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-lg);
  max-width: 500px;
  width: 100%;
  transition: var(--transition);
  border: var(--border);
  margin: 20px 0;
  position: relative;
  overflow: hidden;
}

.container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: var(--highlight);
  z-index: 1;
}

.header {
  text-align: center;
  margin-bottom: 28px;
}

.logo {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
  color: white;
  width: 60px;
  height: 60px;
  border-radius: 16px;
  margin-bottom: 16px;
  font-size: 28px;
  box-shadow: var(--shadow-md);
  position: relative;
  overflow: hidden;
}

.logo::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    to bottom right,
    rgba(255, 255, 255, 0.3) 0%,
    rgba(255, 255, 255, 0) 60%
  );
  transform: rotate(30deg);
}

h1 {
  color: var(--text-dark);
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 8px;
  background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.5px;
}

.subtitle {
  color: var(--text-medium);
  font-size: 1rem;
  font-weight: 400;
  letter-spacing: -0.2px;
}

button {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
  padding: 16px 24px;
  border: none;
  border-radius: var(--border-radius);
  font-size: 1.05rem;
  font-weight: 500;
  cursor: pointer;
  width: 100%;
  margin-bottom: 24px;
  transition: var(--transition);
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  position: relative;
  overflow: hidden;
  letter-spacing: -0.2px;
}

button::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom right,
    rgba(255, 255, 255, 0.2) 0%,
    rgba(255, 255, 255, 0) 60%
  );
}

button:hover {
  background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px) scale(1.01);
}

button:active {
  transform: translateY(0) scale(0.99);
}

.theme-toggle {
  position: fixed;
  top: 20px;
  right: 20px;
  background: var(--card-bg);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: var(--border);
  box-shadow: var(--shadow-sm);
  z-index: 10;
  transition: var(--transition);
}

.theme-toggle:hover {
  transform: scale(1.1);
}

.result {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.weather-data {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 8px;
}

.data-item {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  padding: 16px;
  border-radius: var(--border-radius);
  text-align: center;
  border: var(--border);
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.data-item::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom right,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0) 60%
  );
}

.data-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.data-value {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 6px;
}

.data-label {
  font-size: 0.9rem;
  color: var(--text-light);
  font-weight: 500;
}

.tip-box {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-left: 4px solid var(--accent);
  padding: 16px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  transition: var(--transition);
  border: var(--border);
  position: relative;
  overflow: hidden;
}

.tip-box::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom right,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0) 60%
  );
}

.tip-box:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
  background: rgba(255, 255, 255, 0.15);
}

.dark-mode .tip-box:hover {
  background: rgba(255, 255, 255, 0.05);
}

.tip-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.tip-icon {
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
  color: white;
  min-width: 32px;
  height: 32px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  box-shadow: var(--shadow-sm);
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}

.tip-icon::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    to bottom right,
    rgba(255, 255, 255, 0.3) 0%,
    rgba(255, 255, 255, 0) 60%
  );
  transform: rotate(30deg);
}

.tip-title {
  font-weight: 600;
  color: var(--text-dark);
  font-size: 0.95rem;
  letter-spacing: -0.2px;
}

.tip-content {
  color: var(--text-medium);
  font-size: 0.95rem;
  padding-left: 44px;
  line-height: 1.5;
  letter-spacing: -0.1px;
}

.loading {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255,255,255,0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.fade-in {
  animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Desktop-specific enhancements */
@media (min-width: 768px) {
  .container {
    max-width: 520px;
    padding: 32px;
  }
  
  h1 {
    font-size: 2rem;
  }
  
  .subtitle {
    font-size: 1.05rem;
  }
  
  button {
    padding: 18px 24px;
    font-size: 1.1rem;
  }
  
  .weather-data {
    gap: 14px;
  }
  
  .data-item {
    padding: 18px;
  }
  
  .data-value {
    font-size: 1.6rem;
  }
  
  .data-label {
    font-size: 0.95rem;
  }
  
  .tip-box {
    padding: 18px;
  }
  
  .tip-title {
    font-size: 1rem;
  }
  
  .tip-content {
    font-size: 1rem;
  }
}

/* Mobile-specific optimizations */
@media (max-width: 480px) {
  body {
    padding: 16px;
    min-height: -webkit-fill-available;
  }
  
  .container {
    padding: 24px;
    margin: 16px 0;
  }
  
  .logo {
    width: 56px;
    height: 56px;
    font-size: 26px;
  }
  
  h1 {
    font-size: 1.7rem;
  }
  
  .subtitle {
    font-size: 0.95rem;
  }
  
  button {
    padding: 15px 20px;
    font-size: 1rem;
  }
  
  .weather-data {
    grid-template-columns: 1fr;
  }
  
  .tip-content {
    padding-left: 0;
    margin-top: 10px;
  }
  
  .tip-header {
    margin-bottom: 6px;
  }
  
  .theme-toggle {
    top: 16px;
    right: 16px;
    width: 40px;
    height: 40px;
  }
}

@media (max-width: 380px) {
  .container {
    padding: 20px;
  }
  
  h1 {
    font-size: 1.6rem;
  }
  
  .tip-box {
    padding: 14px;
  }
}
</style>
<body>

  <div class="theme-toggle" id="themeToggle">
    <span id="themeIcon">üåô</span>
  </div>

  <div class="container fade-in">
    <div class="header">
      <div class="logo">üå§Ô∏è</div>
      <h1>WeatherWise</h1>
      <p class="subtitle">Smart weather tips tailored for you</p>
    </div>
    
    <button onclick="getWeather()" id="weatherButton">
      <span id="buttonText">Get Weather Tips</span>
      <span id="buttonLoader" class="loading" style="display: none;"></span>
    </button>
    
    <div class="result" id="output"></div>
  </div>

  <script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    
    // Check for saved theme preference or use system preference
    const savedTheme = localStorage.getItem('theme') || 
                      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    
    // Apply the saved theme
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-mode');
      themeIcon.textContent = '‚òÄÔ∏è';
    }
    
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // Enhanced recommendation functions
    const getOutfit = (temp, code, humidity) => {
      let baseRecommendation = '';
      let accessories = '';
      let materials = '';
      
      // Base outfit based on temperature and weather code
      if (code >= 80) { // Thunderstorm
        baseRecommendation = "Waterproof jacket with hood, waterproof pants, and rubber boots";
        accessories = "Umbrella is not recommended due to lightning risk";
        materials = "Opt for quick-dry synthetic fabrics that wick moisture";
      } 
      else if (code >= 61) { // Rain
        baseRecommendation = "Waterproof jacket with sealed seams, water-resistant pants";
        accessories = "Compact umbrella, waterproof shoe covers";
        materials = "Breathable waterproof materials like Gore-Tex";
      } 
      else if (code >= 51) { // Drizzle
        baseRecommendation = "Water-resistant windbreaker or softshell jacket";
        accessories = "Foldable umbrella just in case";
        materials = "Quick-dry fabrics that handle light moisture";
      }
      else if (temp < -10) {
        baseRecommendation = "Heavy down parka, thermal underwear, fleece layers";
        accessories = "Balaclava, insulated gloves, thermal socks";
        materials = "Down insulation with windproof outer shell";
      }
      else if (temp < 0) {
        baseRecommendation = "Insulated winter coat, sweater, thermal base layer";
        accessories = "Wool hat, scarf, insulated gloves";
        materials = "Wool and synthetic blends for warmth";
      }
      else if (temp < 10) {
        baseRecommendation = "Wool coat or puffer jacket over sweater";
        accessories = "Light gloves, beanie if windy";
        materials = "Wool or fleece for insulation";
      }
      else if (temp < 20) {
        baseRecommendation = "Light jacket or cardigan over shirt";
        accessories = "Light scarf for breezy moments";
        materials = "Breathable cotton or linen";
      }
      else if (temp < 30) {
        baseRecommendation = "T-shirt or blouse with light pants/skirt";
        accessories = "Sunglasses, sun hat if sunny";
        materials = "Light, breathable natural fabrics";
      }
      else {
        baseRecommendation = "Light-colored loose clothing, tank tops, shorts";
        accessories = "Wide-brimmed hat, UV-blocking sunglasses";
        materials = "Moisture-wicking technical fabrics";
      }
      
      // Humidity adjustments
      if (humidity > 70) {
        materials += ". Choose moisture-wicking fabrics as humidity is high";
        if (temp > 25) accessories += ". Carry a small towel for sweat";
      } else if (humidity < 30) {
        materials += ". Layerable fabrics as dry air causes temperature fluctuations";
        if (temp < 15) accessories += ". Lip balm for dry conditions";
      }
      
      // Wind adjustments (if we had wind data)
      // if (wind > 20) accessories += ". Windproof outer layer recommended";
      
      return `${baseRecommendation}. ${accessories}. Material tips: ${materials}`;
    };

    const hydrationAdvice = (temp, humidity) => {
      let baseAdvice = '';
      let additionalTips = '';
      let container = 'Standard water bottle';
      
      // Base hydration needs
      if (temp < 10) {
        baseAdvice = "Drink 1.5-2L throughout the day";
        additionalTips = "Warm herbal teas can help maintain hydration and body temperature";
      } 
      else if (temp < 20) {
        baseAdvice = "Drink 2-2.5L throughout the day";
        additionalTips = "Room temperature water is most comfortable";
      }
      else if (temp < 30) {
        baseAdvice = "Drink 2.5-3L throughout the day";
        additionalTips = "Add lemon or cucumber slices for flavor";
        container = "Insulated bottle to keep water cool";
      }
      else {
        baseAdvice = "Drink 3-4L throughout the day";
        additionalTips = "Electrolyte supplements recommended for prolonged activity";
        container = "Large insulated bottle (1L+) with ice";
      }
      
      // Humidity adjustments
      if (humidity > 80) {
        baseAdvice += " (hydration needs increase by 20% in high humidity)";
        additionalTips += ". Watch for signs of heat exhaustion";
      }
      else if (humidity < 30) {
        baseAdvice += " (dry air increases fluid loss through respiration)";
        additionalTips += ". Use nasal saline spray to prevent dryness";
      }
      
      // Activity level adjustments (would be better with actual activity data)
      additionalTips += ". Increase intake by 500ml per hour of moderate activity";
      
      return `Recommended: ${baseAdvice}. Use a ${container}. Tips: ${additionalTips}`;
    };

    const activitySuggestion = (temp, code, timeOfDay) => {
      let idealActivities = [];
      let precautions = [];
      let timing = '';
      
      // Determine time of day (simplified - would be better with actual time)
      const hours = new Date().getHours();
      timeOfDay = hours > 17 ? 'evening' : hours > 11 ? 'afternoon' : 'morning';
      
      // Weather-based activities
      if (code >= 80) { // Thunderstorm
        idealActivities = ["Indoor swimming", "Museum visits", "Library time", "Cooking classes"];
        precautions = ["Avoid open areas and tall objects", "Postpone outdoor activities"];
      } 
      else if (code >= 61) { // Rain
        idealActivities = ["Indoor rock climbing", "Art galleries", "Coffee shop reading", "Yoga"];
        precautions = ["Waterproof gear needed for any outdoor activities"];
      }
      else if (temp < 0) {
        idealActivities = ["Ice skating", "Skiing", "Hot springs", "Winter photography"];
        precautions = ["Limit exposure to 45-minute intervals", "Watch for frostbite signs"];
      }
      else if (temp < 10) {
        idealActivities = ["Hiking", "Winter markets", "Museums", "Baking"];
        precautions = ["Layer clothing for changing conditions"];
      }
      else if (temp < 20) {
        idealActivities = ["Cycling", "Gardening", "Walking tours", "Outdoor photography"];
        precautions = ["Carry light jacket for cooler moments"];
      }
      else if (temp < 30) {
        idealActivities = ["Swimming", "Beach sports", "Picnics", "Open-air markets"];
        precautions = ["Sun protection essential", "Stay hydrated"];
      }
      else {
        idealActivities = ["Early morning walks", "Shaded terrace activities", "Water parks", "Indoor malls"];
        precautions = ["Avoid strenuous activity 11AM-3PM", "Wear light colors"];
      }
      
      // Time of day adjustments
      if (timeOfDay === 'morning') {
        timing = "Ideal time for ";
        if (temp > 25) timing += "outdoor activities before temperatures peak";
        else timing += "starting your day's activities";
      } 
      else if (timeOfDay === 'afternoon') {
        timing = "Midday is good for ";
        if (temp > 25 || code >= 61) timing += "indoor or shaded activities";
        else timing += "a mix of activities with breaks";
      }
      else {
        timing = "Evening suits ";
        if (temp > 25) timing += "relaxing outdoor dinners or strolls";
        else if (temp < 10) timing += "cozy indoor gatherings";
        else timing += "social activities";
      }
      
      return `${timing}. Try: ${idealActivities.slice(0, 3).join(", ")}. Precautions: ${precautions.join(", ")}`;
    };

    const dryConditionsAdvice = (temp, humidity, uvIndex) => {
      let advice = [];
      let skinCare = '';
      let homeTips = '';
      
      // Temperature-based advice
      if (temp > 30) {
        advice.push("High evaporation rate means drink 25% more water than usual");
        skinCare = "Apply moisturizer after showering to lock in hydration";
        homeTips = "Use humidifiers to maintain 40-50% indoor humidity";
      }
      else if (temp < 10) {
        advice.push("Dry air can irritate respiratory system - consider saline nasal spray");
        skinCare = "Use thicker creams to prevent winter dryness";
        homeTips = "Seal windows to prevent dry outdoor air from entering";
      }
      else {
        advice.push("Enjoy the dry weather but maintain normal hydration");
        skinCare = "Light moisturizer may still be needed";
      }
      
      // Humidity-specific
      if (humidity < 30) {
        advice.push("Static electricity may be noticeable - natural fiber clothing helps");
        homeTips = "Houseplants can help increase indoor humidity";
      }
      
      // UV considerations
      if (uvIndex > 5) {
        advice.push("Dry air makes sun protection even more important");
        skinCare = "Moisturizer with SPF recommended";
      }
      
      return `Dry conditions advice: ${advice.join(". ")}. Skin care: ${skinCare}. ${homeTips}`;
    };

    function getWeather() {
      const button = document.getElementById('weatherButton');
      const buttonText = document.getElementById('buttonText');
      const buttonLoader = document.getElementById('buttonLoader');
      
      // Show loading state
      buttonText.textContent = 'Fetching weather...';
      buttonLoader.style.display = 'block';
      button.disabled = true;
      
      if (!navigator.geolocation) {
        showError("Geolocation is not supported by your browser");
        return;
      }
      
      navigator.geolocation.getCurrentPosition(async pos => {
        const { latitude: lat, longitude: lon } = pos.coords;
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,precipitation_probability,weathercode,relative_humidity_2m&current_weather=true&timezone=auto`;

        try {
          const res = await fetch(url);
          if (!res.ok) throw new Error('Weather service unavailable');
          const data = await res.json();

          const temp = data.current_weather.temperature;
          const code = data.current_weather.weathercode;
          const humidity = data.hourly.relative_humidity_2m[0];
          const rainChances = data.hourly.precipitation_probability.slice(0, 12);
          const rainHours = rainChances.map((val, i) =>
            val > 50 ? `${new Date(data.hourly.time[i]).getHours()}:00` : null
          ).filter(Boolean);
          const hours = new Date().getHours();
          const timeOfDay = hours > 17 ? 'evening' : hours > 11 ? 'afternoon' : 'morning';
          // Simulate UV index (real API would provide this)
          const uvIndex = Math.min(12, Math.round((hours - 6) * (12/6)));

          document.getElementById("output").innerHTML = `
            <div class="weather-data">
              <div class="data-item">
                <div class="data-value">${temp}¬∞C</div>
                <div class="data-label">Temperature</div>
              </div>
              <div class="data-item">
                <div class="data-value">${humidity}%</div>
                <div class="data-label">Humidity</div>
              </div>
            </div>
            
            <div class="tip-box">
              <div class="tip-header">
                <div class="tip-icon">üëï</div>
                <div class="tip-title">Outfit Recommendation</div>
              </div>
              <div class="tip-content">${getOutfit(temp, code, humidity)}</div>
            </div>
            
            <div class="tip-box">
              <div class="tip-header">
                <div class="tip-icon">üíß</div>
                <div class="tip-title">Hydration Advice</div>
              </div>
              <div class="tip-content">${hydrationAdvice(temp, humidity)}</div>
            </div>
            
            <div class="tip-box">
              <div class="tip-header">
                <div class="tip-icon">üö∂‚Äç‚ôÇÔ∏è</div>
                <div class="tip-title">Activity Suggestion</div>
              </div>
              <div class="tip-content">${activitySuggestion(temp, code, timeOfDay)}</div>
            </div>
            
            ${
              rainHours.length
              ? `<div class="tip-box">
                  <div class="tip-header">
                    <div class="tip-icon">üåßÔ∏è</div>
                    <div class="tip-title">Rain Expected</div>
                  </div>
                  <div class="tip-content">Precipitation likely at: ${rainHours.join(", ")}. Carry compact umbrella and waterproof bag for electronics.</div>
                </div>`
              : `<div class="tip-box">
                  <div class="tip-header">
                    <div class="tip-icon">‚òÄÔ∏è</div>
                    <div class="tip-title">Dry Conditions</div>
                  </div>
                  <div class="tip-content">${dryConditionsAdvice(temp, humidity, uvIndex)}</div>
                </div>`
            }
          `;
        } catch (error) {
          showError("Couldn't retrieve weather data. Please try again later.");
          console.error(error);
        } finally {
          buttonText.textContent = 'Refresh Weather';
          buttonLoader.style.display = 'none';
          button.disabled = false;
        }
      }, () => {
        showError("Please enable location access for weather information");
        buttonText.textContent = 'Get Weather Tips';
        buttonLoader.style.display = 'none';
        button.disabled = false;
      });
    }

    function showError(message) {
      document.getElementById("output").innerHTML = `
        <div class="tip-box" style="border-left-color: #ef4444;">
          <div class="tip-header">
            <div class="tip-icon" style="background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);">‚ö†Ô∏è</div>
            <div class="tip-title">Error</div>
          </div>
          <div class="tip-content">${message}</div>
        </div>
      `;
    }

    // Better mobile viewport handling
    function setAppHeight() {
      document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
    }
    
    window.addEventListener('resize', setAppHeight);
    setAppHeight();
  </script>

</body>
</html>
